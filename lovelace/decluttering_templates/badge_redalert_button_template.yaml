badge_redalert_button:

  default:
    - entity: 'binary_sensor.redalert_all'
    - svg_fill_on: '#bf4040'
    # - svg_path: 'M12,10A2,2 0 0,1 14,12C14,12.5 13.82,12.94 13.53,13.29L16.7,22H14.57L12,14.93L9.43,22H7.3L10.47,13.29C10.18,12.94 10,12.5 10,12A2,2 0 0,1 12,10M12,8A4,4 0 0,0 8,12C8,12.5 8.1,13 8.28,13.46L7.4,15.86C6.53,14.81 6,13.47 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12C18,13.47 17.47,14.81 16.6,15.86L15.72,13.46C15.9,13 16,12.5 16,12A4,4 0 0,0 12,8M12,4A8,8 0 0,0 4,12C4,14.36 5,16.5 6.64,17.94L5.92,19.94C3.54,18.11 2,15.23 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12C22,15.23 20.46,18.11 18.08,19.94L17.36,17.94C19,16.5 20,14.36 20,12A8,8 0 0,0 12,4Z'
    # - svg_path_colored: 'm 12,8 c -2.209139,0 -4,1.790861 -4,4 0,0.5 0.1,1 0.28,1.46 L 7.4,15.86 C 6.53,14.81 6,13.47 6,12 6,8.6862915 8.6862915,6 12,6 c 3.313708,0 6,2.6862915 6,6 0,1.47 -0.53,2.81 -1.4,3.86 l -0.88,-2.4 C 15.9,13 16,12.5 16,12 16,9.790861 14.209139,8 12,8 m 0,-4 c -4.418278,0 -8,3.581722 -8,8 0,2.36 1,4.5 2.64,5.94 l -0.72,2 C 3.54,18.11 2,15.23 2,12 2,6.4771525 6.4771525,2 12,2 c 5.522847,0 10,4.4771525 10,10 0,3.23 -1.54,6.11 -3.92,7.94 l -0.72,-2 C 19,16.5 20,14.36 20,12 20,7.581722 16.418278,4 12,4 Z'
    # - svg_path_on: 'M12,10A2,2 0 0,1 14,12C14,12.5 13.82,12.94 13.53,13.29L16.7,22H14.57L12,14.93L9.43,22H7.3L10.47,13.29C10.18,12.94 10,12.5 10,12A2,2 0 0,1 12,10M12,8A4,4 0 0,0 8,12C8,12.5 8.1,13 8.28,13.46L7.4,15.86C6.53,14.81 6,13.47 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12C18,13.47 17.47,14.81 16.6,15.86L15.72,13.46C15.9,13 16,12.5 16,12A4,4 0 0,0 12,8M12,4A8,8 0 0,0 4,12C4,14.36 5,16.5 6.64,17.94L5.92,19.94C3.54,18.11 2,15.23 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12C22,15.23 20.46,18.11 18.08,19.94L17.36,17.94C19,16.5 20,14.36 20,12A8,8 0 0,0 12,4Z'
    # - svg_path_colored_on: 'm 12,8 c -2.209139,0 -4,1.790861 -4,4 0,0.5 0.1,1 0.28,1.46 L 7.4,15.86 C 6.53,14.81 6,13.47 6,12 6,8.6862915 8.6862915,6 12,6 c 3.313708,0 6,2.6862915 6,6 0,1.47 -0.53,2.81 -1.4,3.86 l -0.88,-2.4 C 15.9,13 16,12.5 16,12 16,9.790861 14.209139,8 12,8 m 0,-4 c -4.418278,0 -8,3.581722 -8,8 0,2.36 1,4.5 2.64,5.94 l -0.72,2 C 3.54,18.11 2,15.23 2,12 2,6.4771525 6.4771525,2 12,2 c 5.522847,0 10,4.4771525 10,10 0,3.23 -1.54,6.11 -3.92,7.94 l -0.72,-2 C 19,16.5 20,14.36 20,12 20,7.581722 16.418278,4 12,4 Z'
    - svg_path: 'M160.875 59.016C149.312 52.609 134.672 56.766 128.25 68.391C117.625 87.609 112 109.418 112 131.445C112 150.477 116.031 168.883 123.984 186.07C128.031 194.848 136.719 200.004 145.781 200.004C149.156 200.004 152.578 199.285 155.828 197.785C167.859 192.223 173.109 177.977 167.547 165.945C162.547 155.102 160 143.477 160 131.445C160 117.512 163.547 103.762 170.25 91.641C176.672 80.047 172.469 65.422 160.875 59.016ZM420.172 58.234C408.141 63.797 402.891 78.047 408.453 90.078C413.453 100.918 416 112.543 416 124.57C416 138.508 412.453 152.258 405.75 164.383C399.328 175.977 403.531 190.598 415.125 197.004C418.813 199.035 422.797 200.004 426.734 200.004C435.172 200.004 443.375 195.535 447.75 187.633C458.375 168.414 464 146.602 464 124.57C464 105.543 459.969 87.141 452.016 69.953C446.453 57.891 432.141 52.703 420.172 58.234ZM62.609 2.363C46.172 -4.32 27.578 3.676 20.953 20.02C7.047 54.359 0 90.703 0 128.008C0 165.32 7.047 201.66 20.953 236C25.984 248.469 37.969 256 50.625 256C54.609 256 58.688 255.25 62.609 253.656C79 247.031 86.906 228.375 80.266 212.004C69.469 185.32 64 157.07 64 128.008C64 98.949 69.469 70.703 80.266 44.016C86.906 27.641 79 8.988 62.609 2.363ZM555.047 20.02C548.437 3.613 529.812 -4.289 513.391 2.363C497 8.988 489.094 27.641 495.734 44.016C506.531 70.703 512 98.949 512 128.008C512 157.07 506.531 185.32 495.734 212.004C489.094 228.375 497 247.031 513.391 253.656C517.328 255.25 521.391 256 525.375 256C538.031 256 550.016 248.438 555.047 236C568.953 201.66 576 165.32 576 128.008C576 90.703 568.953 54.359 555.047 20.02Z'
    - svg_path_on: 'M160.875 59.016C149.312 52.609 134.672 56.766 128.25 68.391C117.625 87.609 112 109.418 112 131.445C112 150.477 116.031 168.883 123.984 186.07C128.031 194.848 136.719 200.004 145.781 200.004C149.156 200.004 152.578 199.285 155.828 197.785C167.859 192.223 173.109 177.977 167.547 165.945C162.547 155.102 160 143.477 160 131.445C160 117.512 163.547 103.762 170.25 91.641C176.672 80.047 172.469 65.422 160.875 59.016ZM420.172 58.234C408.141 63.797 402.891 78.047 408.453 90.078C413.453 100.918 416 112.543 416 124.57C416 138.508 412.453 152.258 405.75 164.383C399.328 175.977 403.531 190.598 415.125 197.004C418.813 199.035 422.797 200.004 426.734 200.004C435.172 200.004 443.375 195.535 447.75 187.633C458.375 168.414 464 146.602 464 124.57C464 105.543 459.969 87.141 452.016 69.953C446.453 57.891 432.141 52.703 420.172 58.234ZM62.609 2.363C46.172 -4.32 27.578 3.676 20.953 20.02C7.047 54.359 0 90.703 0 128.008C0 165.32 7.047 201.66 20.953 236C25.984 248.469 37.969 256 50.625 256C54.609 256 58.688 255.25 62.609 253.656C79 247.031 86.906 228.375 80.266 212.004C69.469 185.32 64 157.07 64 128.008C64 98.949 69.469 70.703 80.266 44.016C86.906 27.641 79 8.988 62.609 2.363ZM555.047 20.02C548.437 3.613 529.812 -4.289 513.391 2.363C497 8.988 489.094 27.641 495.734 44.016C506.531 70.703 512 98.949 512 128.008C512 157.07 506.531 185.32 495.734 212.004C489.094 228.375 497 247.031 513.391 253.656C517.328 255.25 521.391 256 525.375 256C538.031 256 550.016 248.438 555.047 236C568.953 201.66 576 165.32 576 128.008C576 90.703 568.953 54.359 555.047 20.02Z'
    - svg_path_colored: 'M350.032 111.942C357.422 142.162 343.255 169.589 320 183.123V480C320 497.673 305.673 512 288 512H288C270.327 512 256 497.673 256 480V183.123C236.951 172.037 224 151.629 224 128C224 88.131 260.453 56.78 301.845 65.453C325.046 70.314 344.4 88.916 350.032 111.942Z'
    - svg_path_colored_on: 'M350.032 111.942C357.422 142.162 343.255 169.589 320 183.123V480C320 497.673 305.673 512 288 512H288C270.327 512 256 497.673 256 480V183.123C236.951 172.037 224 151.629 224 128C224 88.131 260.453 56.78 301.845 65.453C325.046 70.314 344.4 88.916 350.032 111.942Z'


  card:
    type: 'custom:decluttering-card'
    template: 'badge_button_svg'
    variables:
      - entity: '[[entity]]'
      - name: "[[[ 
            if ( states['binary_sensor.redalert_ashdod'].state == 'on' )
              return 'אשדוד';
            else if ( states['binary_sensor.redalert_qiryat_gat'].state == 'on' )
              return 'קריית גת';
            else if (entity.state == 'off')
              return 'Off';
            else
              return 'On'; 
          ]]]"
      - icon: '[[icon]]'
      - svg_fill: '[[svg_fill]]'
      - svg_path: '[[svg_path]]'
      - svg_path_colored: '[[svg_path_colored]]'
      - svg_fill_on: '[[svg_fill_on]]'
      - svg_path_on: '[[svg_path_on]]'
      - svg_path_colored_on: '[[svg_path_colored_on]]'
      - svg_icon_y: -32
      - svg_icon_width: 576
      - svg_icon_height: 576
      - color: '[[color]]'
      - color_type: '[[color_type]]'
      - background_color: '[[background_color]]'
      - text_color: '[[text_color]]'
      - text_transform: 'none'
      - state: '[[state]]'
      - hold_action:
          action: 'more-info'
      - tap_action:
          #haptic: heavy
          action: 'fire-dom-event'
          browser_mod:
            command: 'popup'
            hide_header: false
            title: 'צבע אדום'
            
            card:

              type: 'custom:layout-card'
              layout_type: 'vertical'
              cards:

                - type: 'markdown'
                  style: |
                    ha-card.type-markdown {
                      background: none;
                      box-shadow: none;
                      padding: 0.3em 1.25em 0.4em 0.5em;
                      text-align: right;
                      direction: rtl;
                    }
                  entity_id: 'sensor.redalert'
                  content: |
                    {% if state_attr('sensor.redalert', 'alert') == true %}
                      ### התרעות
                      {% for l in state_attr('sensor.redalert', 'current')['data'] %}
                        {{- l }}
                      {% endfor %}
                      </ul>
                    {% else %}
                     אין התרעות כרגע
                    {% endif %}
